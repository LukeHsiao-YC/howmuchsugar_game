<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å«ç³–é£²æ–™ç–Šç–Šæ¨‚</title>
  
  <!-- å¼•å…¥ Tailwind CSS é€²è¡Œæ’ç‰ˆ -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- å¼•å…¥ React èˆ‡ ReactDOM -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <!-- å¼•å…¥ Babel ä¾†è®“ç€è¦½å™¨è®€æ‡‚ JSX èªæ³• -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- å¼•å…¥ Google å­—é«” -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
  
  <style>
    body { font-family: 'Noto Sans TC', sans-serif; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
  </style>
</head>
<body class="bg-orange-50">
  
  <!-- React æ¸²æŸ“çš„ç›®æ¨™é» -->
  <div id="root"></div>

  <!-- ä¸»è¦é‚è¼¯ç¨‹å¼ç¢¼ -->
  <script type="text/babel">
    const { useState, useEffect } = React;

    // --- å¯¦è­‰é†«å­¸è³‡æ–™èˆ‡éŠæˆ²è¨­å®š ---
    // æ ¹æ“š WHO å»ºè­°ï¼Œå…’ç«¥æ¯æ—¥æ¸¸é›¢ç³–æ”å–é‡æ‡‰ä½æ–¼ç¸½ç†±é‡ 5%ï¼Œç´„ç‚º 25g (å³ 5 é¡†æ–¹ç³–)ã€‚
    // æ¯é¡†æ–¹ç³–ç´„ç‚º 5 å…‹ç³–ã€‚
    const CUBE_WEIGHT = 5; 

    const drinksData = [
      {
        id: 1,
        name: 'åœ‹æ°‘ä¹³é…¸é£²æ–™ (100ml)',
        emoji: 'ğŸ§ƒ',
        sugarGrams: 15,
        description: 'çœ‹èµ·ä¾†å¥åº·å°å·§ï¼Œä½†ç‚ºäº†è“‹éé…¸å‘³ï¼ŒåŠ äº†é©šäººçš„ç³–åˆ†ï¼',
        hint: 'ğŸ’¡ æç¤ºï¼šé›–ç„¶å¾ˆå°ç“¶ï¼Œä½†å«ç³–å¯†åº¦è¶…é«˜ï¼ç­”æ¡ˆå¤§ç´„åœ¨ 2~5 é¡†æ–¹ç³–ä¹‹é–“ã€‚',
        color: 'bg-red-100'
      },
      {
        id: 2,
        name: 'åŒ…è£é‹å‹•é£²æ–™ (600ml)',
        emoji: 'ğŸ’§',
        sugarGrams: 35,
        description: 'ç”Ÿç—…æˆ–é‹å‹•æµæ±—æ‰éœ€è¦å–ï¼Œå¹³æ™‚ç•¶æ°´å–æœƒæ”å–éå¤šç³–åˆ†ã€‚',
        hint: 'ğŸ’¡ æç¤ºï¼šå–èµ·ä¾†åªæœ‰å¾®ç”œï¼Œä½†å› ç‚ºå¾ˆå¤§ç“¶ (600ml)ï¼Œç¸½ç³–é‡åœ¨ 5~10 é¡†æ–¹ç³–ä¹‹é–“ï¼',
        color: 'bg-blue-100'
      },
      {
        id: 3,
        name: 'å…¨ç³–çç å¥¶èŒ¶ (700ml)',
        emoji: 'ğŸ§‹',
        sugarGrams: 60,
        description: 'é™¤äº†æ»¿æ»¿çš„ç³–æ¼¿ï¼Œçç åœ¨ç†¬ç…®æ™‚ä¹Ÿå¸æ»¿äº†ç³–æ°´ï¼',
        hint: 'ğŸ’¡ æç¤ºï¼šé€™å¯æ˜¯è¶…ç´šå¤§é­”ç‹ï¼é™¤äº†èŒ¶è£¡çš„ç³–ï¼Œçç ä¹Ÿæ³¡æ»¿äº†ç³–æ°´ï¼Œçµ•å°è¶…é 10 é¡†æ–¹ç³–ï¼',
        color: 'bg-amber-100'
      },
      {
        id: 4,
        name: 'å·§å…‹åŠ›ç‰›å¥¶ (400ml)',
        emoji: 'ğŸ«',
        sugarGrams: 40,
        description: 'çœ‹ä¼¼è£œå……éˆ£è³ªï¼Œä½†ä¹Ÿå–ä¸‹äº†å¤§é‡çš„èª¿å‘³ç³–æ¼¿ï¼',
        hint: 'ğŸ’¡ æç¤ºï¼šå¤§ç´„åœ¨ 7~9 é¡†æ–¹ç³–ä¹‹é–“ã€‚',
        color: 'bg-orange-200'
      },
      {
        id: 5,
        name: 'éº¥é¦™ç´…èŒ¶é‹ç®”åŒ… (300ml)',
        emoji: 'ğŸ§ƒ',
        sugarGrams: 28,
        description: 'ç†Ÿæ‚‰çš„éº¥é¦™æœ€å°å‘³ï¼Œä½†å°å°ä¸€åŒ…ç³–åˆ†ä¹Ÿä¸å°‘ã€‚',
        hint: 'ğŸ’¡ æç¤ºï¼šå¤§ç´„åœ¨ 5~7 é¡†æ–¹ç³–ä¹‹é–“ã€‚',
        color: 'bg-red-200'
      },
      {
        id: 6,
        name: 'ç¶“å…¸å¯æ¨‚ (330ml éµç½)',
        emoji: 'ğŸ¥¤',
        sugarGrams: 35,
        description: 'å–ä¸‹å»å……æ»¿æ°£æ³¡å¾ˆçˆ½å¿«ï¼Œä½†å…¶å¯¦æ˜¯ä¸€æ•´æ¯ç³–æ°´ã€‚',
        hint: 'ğŸ’¡ æç¤ºï¼šå¤§ç´„åœ¨ 6~8 é¡†æ–¹ç³–ä¹‹é–“ã€‚',
        color: 'bg-gray-200'
      },
      {
        id: 7,
        name: 'é›¶å¡å¯æ¨‚ (330ml éµç½)',
        emoji: 'ğŸ–¤',
        sugarGrams: 0,
        description: 'ä½¿ç”¨ä»£ç³–ç”¢ç”Ÿç”œå‘³ã€‚é›–ç„¶æ²’æœ‰ç†±é‡ï¼Œä½†é•·æœŸå–ä»å¯èƒ½å½±éŸ¿è…¸é“èŒå¢ã€‚',
        hint: 'ğŸ’¡ æç¤ºï¼šé€™é¡Œæ˜¯é™·é˜±é¡Œï¼ä»”ç´°çœ‹å®ƒçš„åå­—ï¼',
        color: 'bg-gray-300'
      },
      {
        id: 8,
        name: 'çŸ¥åæœèœæ± (330ml)',
        emoji: 'ğŸ¥•',
        sugarGrams: 26,
        description: 'åŒ…è£ä¸Šæ»¿æ»¿çš„è”¬èœï¼Œä½†ç‚ºäº†é †å£å…¶å¯¦åŠ äº†å¾ˆå¤šç³–ï¼',
        hint: 'ğŸ’¡ æç¤ºï¼šå¤§ç´„åœ¨ 4~6 é¡†æ–¹ç³–ä¹‹é–“ã€‚',
        color: 'bg-green-100'
      },
      {
        id: 9,
        name: '100% è˜‹æœæ± (400ml)',
        emoji: 'ğŸ',
        sugarGrams: 40,
        description: 'å°±ç®—æ˜¯å¤©ç„¶æœæ±ï¼Œæ¿¾æ‰çº–ç¶­å¾Œå‰©ä¸‹çš„å¹¾ä¹éƒ½æ˜¯æœç³–ï¼Œå‡ç³–æŒ‡æ•¸å¾ˆé«˜ï¼',
        hint: 'ğŸ’¡ æç¤ºï¼šåˆ¥è¢«ã€Œå¤©ç„¶ã€é¨™äº†ï¼Œå¤§ç´„åœ¨ 7~9 é¡†æ–¹ç³–ä¹‹é–“ã€‚',
        color: 'bg-red-100'
      },
      {
        id: 10,
        name: 'è˜‹æœè¥¿æ‰“ (600ml å¯¶ç‰¹ç“¶)',
        emoji: 'ğŸ',
        sugarGrams: 58,
        description: 'è¾¦æ¡Œå¿…å‚™çš„ç¥ç´šé£²æ–™ï¼Œä½†ä¸€å¤§ç“¶å–ä¸‹å»ç³–åˆ†ç›´æ¥çˆ†è¡¨ï¼',
        hint: 'ğŸ’¡ æç¤ºï¼šè·Ÿå…¨ç³–çå¥¶æœ‰å¾—æ‹¼ï¼çµ•å°è¶…é 10 é¡†æ–¹ç³–ï¼',
        color: 'bg-yellow-200'
      },
      {
        id: 11,
        name: 'æ‰‹æ–é£²å«ç³–ç´…èŒ¶ (700ml å¤§æ¯)',
        emoji: 'ğŸ¥¤',
        sugarGrams: 50,
        description: 'å³ä½¿ä¸åŠ æ–™ï¼Œå¤§æ¯å…¨ç³–çš„å«ç³–é‡ä¾ç„¶éå¸¸é©šäººã€‚',
        hint: 'ğŸ’¡ æç¤ºï¼šå¤§ç´„åœ¨ 9~11 é¡†æ–¹ç³–ä¹‹é–“ã€‚',
        color: 'bg-orange-100'
      },
      {
        id: 12,
        name: 'ç“¶è£å¥¶èŒ¶ (500ml)',
        emoji: 'ğŸ§‹',
        sugarGrams: 35,
        description: 'é¦™æ¿ƒæ»‘é †çš„å£æ„Ÿï¼Œé çš„æ˜¯å¤§é‡çš„ç³–èˆ‡å¥¶ç²¾ã€‚',
        hint: 'ğŸ’¡ æç¤ºï¼šå¤§ç´„åœ¨ 6~8 é¡†æ–¹ç³–ä¹‹é–“ã€‚',
        color: 'bg-orange-50'
      },
      {
        id: 13,
        name: 'å¸‚å”®ç½è£æ‹¿éµå’–å•¡ (290ml)',
        emoji: 'â˜•',
        sugarGrams: 20,
        description: 'ç‚ºäº†æ©è“‹å’–å•¡çš„è‹¦å‘³ä¸¦å¢åŠ æ¿ƒéƒå£æ„Ÿï¼ŒåŠ äº†æ¯”æƒ³åƒä¸­æ›´å¤šçš„ç³–åˆ†ï¼',
        hint: 'ğŸ’¡ æç¤ºï¼šå¤§ç´„åœ¨ 3~5 é¡†æ–¹ç³–ä¹‹é–“ã€‚',
        color: 'bg-stone-200'
      },
      {
        id: 14,
        name: 'ç„¡ç³–ç¶ èŒ¶ (500ml)',
        emoji: 'ğŸµ',
        sugarGrams: 0,
        description: 'å®Œå…¨æ²’æœ‰åŠ ç³–ï¼Œæ˜¯è§£æ¸´çš„å¥½é¸æ“‡ï¼',
        hint: 'ğŸ’¡ æç¤ºï¼šä»”ç´°çœ‹åå­—ï¼Œå®ƒæ˜¯ã€Œç„¡ç³–ã€çš„å–”ï¼',
        color: 'bg-green-50'
      },
      {
        id: 15,
        name: 'ç„¡ç³–é¢¨å‘³æ°£æ³¡æ°´ (500ml)',
        emoji: 'ğŸ«§',
        sugarGrams: 0,
        description: 'åˆ©ç”¨é¦™æ–™å¢åŠ é¢¨å‘³ï¼Œä½†è£¡é¢çœŸçš„æ²’æœ‰åŠ ç³–ã€‚',
        hint: 'ğŸ’¡ æç¤ºï¼šé›–ç„¶å–èµ·ä¾†é¦™é¦™çš„ï¼Œä½†å…¶å¯¦æ²’æœ‰ç³–åˆ†ï¼',
        color: 'bg-cyan-100'
      },
      {
        id: 16,
        name: 'å«ç³–è±†æ¼¿ (400ml)',
        emoji: 'ğŸ¥›',
        sugarGrams: 20,
        description: 'é›–ç„¶å¯Œå«æ¤ç‰©è›‹ç™½ï¼Œä½†ã€Œå¾®ç³–ã€æˆ–ã€Œä¸€èˆ¬ã€è±†æ¼¿é€šå¸¸åŠ äº†ä¸å°‘ç³–ä¾†è“‹éè±†è…¥å‘³ã€‚',
        hint: 'ğŸ’¡ æç¤ºï¼šå¤§ç´„åœ¨ 3~5 é¡†æ–¹ç³–ä¹‹é–“ã€‚',
        color: 'bg-yellow-50'
      }
    ];

    

    function SugarGame() {
      const [gameState, setGameState] = useState('start'); 
      const [currentDrinkIndex, setCurrentDrinkIndex] = useState(0);
      const [guessCubes, setGuessCubes] = useState(0);
      const [showAnswer, setShowAnswer] = useState(false);
      const [showHint, setShowHint] = useState(false);
      const [score, setScore] = useState(0);

      const [practiceSugar, setPracticeSugar] = useState('');
      const [practiceCubes, setPracticeCubes] = useState('');
      const [practiceResult, setPracticeResult] = useState(null);

      const currentDrink = drinksData[currentDrinkIndex];
      const actualCubes = Math.round((currentDrink?.sugarGrams || 0) / CUBE_WEIGHT);

      const handleGuess = () => {
        setShowAnswer(true);
        if (Math.abs(guessCubes - actualCubes) <= 1) {
          setScore(s => s + 1);
        }
      };

      const nextRound = () => {
        if (currentDrinkIndex < drinksData.length - 1) {
          setCurrentDrinkIndex(i => i + 1);
          setGuessCubes(0);
          setShowAnswer(false);
          setShowHint(false);
        } else {
          setGameState('edu-teach'); 
        }
      };

      const restartGame = () => {
        setGameState('start');
        setCurrentDrinkIndex(0);
        setGuessCubes(0);
        setShowAnswer(false);
        setShowHint(false);
        setScore(0);
        setPracticeSugar('');
        setPracticeCubes('');
        setPracticeResult(null);
      };

      const checkPractice = () => {
        if (Number(practiceSugar) === 30 && Number(practiceCubes) === 6) {
          setPracticeResult('correct');
        } else {
          setPracticeResult('wrong');
        }
      };

      const SugarCube = ({ animate = false, delay = 0 }) => (
        <div 
          className={`w-8 h-8 bg-white border-2 border-gray-200 rounded shadow-md m-0.5 flex items-center justify-center transition-all ${animate ? 'animate-bounce' : ''}`}
          style={{ animationDelay: `${delay}ms` }}
        >
          <div className="w-6 h-6 border border-gray-100 rounded-sm opacity-50"></div>
        </div>
      );

      if (gameState === 'start') {
        return (
          <div className="min-h-screen bg-orange-50 flex flex-col items-center justify-center p-4 font-sans">
            <LobbyButton />
            <div className="max-w-md w-full bg-white rounded-3xl shadow-xl p-8 text-center space-y-6 transform transition hover:scale-105">
              <div className="text-6xl animate-bounce">ğŸ¬</div>
              <h1 className="text-3xl font-extrabold text-gray-800">å«ç³–é£²æ–™ç–Šç–Šæ¨‚</h1>
              <p className="text-gray-600 font-medium">
                ä½ çŸ¥é“å¸¸å–çš„é£²æ–™è£¡è—äº†å¤šå°‘é¡†æ–¹ç³–å—ï¼Ÿ<br/>
                (æç¤ºï¼šä¸€é¡†æ–¹ç³–å¤§ç´„æ˜¯ 5 å…¬å…‹ç³–)
              </p>
              <button 
                onClick={() => setGameState('playing')}
                className="w-full py-4 bg-orange-500 hover:bg-orange-600 text-white rounded-2xl font-bold text-xl flex items-center justify-center gap-2 shadow-lg active:scale-95 transition"
              >
                <span>â–¶ï¸</span> é–‹å§‹æŒ‘æˆ°
              </button>
              <p className="mt-4 text-sm text-orange-600 font-bold border-t border-orange-100 pt-4">è•­å®‡è¶…é†«å¸«è£½ä½œ ä¸€èµ·é‚å‘å¥åº·ç”Ÿæ´»</p>
            </div>
          </div>
        );
      }

      if (gameState === 'edu-teach') {
        return (
          <div className="min-h-screen bg-blue-50 flex flex-col items-center p-4 font-sans overflow-y-auto pb-20">
            <LobbyButton />
            <div className="max-w-md w-full space-y-6 mt-8">
              <div className="bg-white rounded-3xl shadow-lg p-6 text-center">
                <h2 className="text-2xl font-bold text-gray-800 mb-2">æŒ‘æˆ°å®Œæˆï¼</h2>
                <p className="text-lg text-gray-600">ä½ çš„åˆ†æ•¸ï¼š{score} / {drinksData.length}</p>
              </div>

              <div className="bg-white rounded-3xl shadow-lg p-6">
                <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                  <span className="text-xl">ğŸ“–</span> çµ•æ‹›ï¼šæ€éº¼çœ‹ç‡Ÿé¤Šæ¨™ç¤ºï¼Ÿ
                </h3>
                
                <div className="border-4 border-black p-4 bg-white font-mono text-sm mb-6">
                  <h4 className="text-lg font-bold border-b-2 border-black pb-1 mb-2">ç‡Ÿé¤Šæ¨™ç¤º</h4>
                  <div className="flex justify-between border-b border-gray-400 pb-1 mb-1">
                    <span>æ¯ä¸€ä»½é‡</span><span>250 æ¯«å‡</span>
                  </div>
                  <div className="flex justify-between border-b-4 border-black pb-1 mb-2 bg-yellow-100 font-bold">
                    <span>æœ¬åŒ…è£å«</span><span>2 ä»½</span>
                  </div>
                  <div className="flex justify-between mb-1">
                    <span>ç†±é‡</span><span>100 å¤§å¡</span>
                  </div>
                  <div className="flex justify-between font-bold text-red-600 bg-red-50 border-l-4 border-red-500 pl-2">
                    <span>ç³–</span><span>20.0 å…¬å…‹</span>
                  </div>
                </div>

                <div className="space-y-4">
                  <div className="p-3 bg-gray-50 rounded-xl border border-gray-200">
                    <span className="inline-block bg-black text-white rounded-full w-6 h-6 text-center text-sm mr-2">1</span>
                    æ‰¾ <strong>ã€Œæ¯ä»½ã€</strong> çš„ç³–é‡ (20å…‹)
                  </div>
                  <div className="p-3 bg-gray-50 rounded-xl border border-gray-200">
                    <span className="inline-block bg-black text-white rounded-full w-6 h-6 text-center text-sm mr-2">2</span>
                    æ‰¾ æœ¬åŒ…è£å« <strong>ã€Œå¹¾ä»½ã€</strong> (2ä»½)
                  </div>
                  <div className="p-3 bg-green-100 rounded-xl border border-green-300 font-bold text-green-800">
                    <span className="inline-block bg-green-600 text-white rounded-full w-6 h-6 text-center text-sm mr-2">3</span>
                    ç›¸ä¹˜ï¼ 20å…‹ Ã— 2ä»½ = ç¸½å…± 40 å…‹ç³–
                  </div>
                  <div className="p-3 bg-orange-100 rounded-xl border border-orange-300 font-bold text-orange-800 flex items-center">
                    <span className="inline-block bg-orange-600 text-white rounded-full w-6 h-6 text-center text-sm mr-2 shrink-0">4</span>
                    æ›ç®—æ–¹ç³–ï¼š40 Ã· 5 = <span className="text-2xl ml-2">8é¡† ğŸ¬</span>
                  </div>
                </div>
              </div>

              <button 
                onClick={() => setGameState('edu-practice')}
                className="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-bold text-xl flex items-center justify-center gap-2 shadow-lg active:scale-95 transition"
              >
                æ›ä½ ç®—ç®—çœ‹ï¼ <span>â¡ï¸</span>
              </button>
            </div>
          </div>
        );
      }

      if (gameState === 'edu-practice') {
        return (
          <div className="min-h-screen bg-indigo-50 flex flex-col items-center p-4 font-sans overflow-y-auto pb-20">
            <LobbyButton />
            <div className="max-w-md w-full space-y-6 mt-8">
              <div className="bg-white rounded-3xl shadow-lg p-6">
                <h3 className="text-xl font-bold text-indigo-800 mb-4 flex items-center gap-2">
                  âœï¸ å¯¦æˆ°æ¼”ç·´
                </h3>
                <p className="text-gray-600 mb-4">é€™æ˜¯ä¸€ç“¶å¸‚å”®çš„èª¿å‘³æœæ±ï¼Œè«‹æ ¹æ“šç‡Ÿé¤Šæ¨™ç¤ºç®—å‡ºæ­£ç¢ºçš„ç³–é‡èˆ‡æ–¹ç³–æ•¸ï¼</p>
                
                <div className="border-4 border-black p-4 bg-white font-mono text-sm mb-6">
                  <h4 className="text-lg font-bold border-b-2 border-black pb-1 mb-2">ç‡Ÿé¤Šæ¨™ç¤º</h4>
                  <div className="flex justify-between border-b border-gray-400 pb-1 mb-1">
                    <span>æ¯ä¸€ä»½é‡</span><span>200 æ¯«å‡</span>
                  </div>
                  <div className="flex justify-between border-b-4 border-black pb-1 mb-2 bg-yellow-100 font-bold">
                    <span>æœ¬åŒ…è£å«</span><span>2 ä»½</span>
                  </div>
                  <div className="flex justify-between font-bold text-red-600 bg-red-50 border-l-4 border-red-500 pl-2">
                    <span>ç³–</span><span>15.0 å…¬å…‹</span>
                  </div>
                </div>

                <div className="space-y-4">
                  <div>
                    <label className="block text-sm font-bold text-gray-700 mb-1">1. è«‹å•é€™ç“¶é£²æ–™ç¸½å…±å«å¹¾å…¬å…‹ç³–ï¼Ÿ</label>
                    <div className="flex items-center gap-2">
                      <input 
                        type="number" 
                        value={practiceSugar} 
                        onChange={e => setPracticeSugar(e.target.value)}
                        className="flex-1 border-2 border-gray-300 rounded-lg p-2 text-lg focus:border-indigo-500 focus:outline-none" 
                        placeholder="è¼¸å…¥å…¬å…‹æ•¸"
                      />
                      <span className="font-bold text-gray-600">å…¬å…‹</span>
                    </div>
                  </div>
                  <div>
                    <label className="block text-sm font-bold text-gray-700 mb-1">2. æ›ç®—ä¸‹ä¾†å¤§ç´„æ˜¯å¹¾é¡†æ–¹ç³–ï¼Ÿ (1é¡†=5g)</label>
                    <div className="flex items-center gap-2">
                      <input 
                        type="number" 
                        value={practiceCubes} 
                        onChange={e => setPracticeCubes(e.target.value)}
                        className="flex-1 border-2 border-gray-300 rounded-lg p-2 text-lg focus:border-indigo-500 focus:outline-none" 
                        placeholder="è¼¸å…¥æ–¹ç³–æ•¸"
                      />
                      <span className="font-bold text-gray-600">é¡† ğŸ¬</span>
                    </div>
                  </div>

                  {practiceResult === 'wrong' && (
                    <div className="p-3 bg-red-100 text-red-700 rounded-lg text-sm font-bold flex items-center gap-2 animate-pulse">
                      <span>âŒ</span> å“å‘€ï¼ç®—éŒ¯äº†ï¼Œå†ä»”ç´°çœ‹ä¸€æ¬¡å…¬å¼ï¼š15å…‹ Ã— 2ä»½ = ?
                    </div>
                  )}
                  
                  {practiceResult === 'correct' ? (
                    <div className="space-y-4 animate-fade-in">
                      <div className="p-3 bg-green-100 text-green-700 rounded-lg text-sm font-bold flex items-center gap-2">
                        <span>âœ…</span> å¤ªæ£’äº†ï¼å®Œå…¨æ­£ç¢ºï¼(30å…‹ç³– = 6é¡†æ–¹ç³–)
                      </div>
                      <button 
                        onClick={() => setGameState('edu-summary')}
                        className="w-full py-4 bg-orange-500 hover:bg-orange-600 text-white rounded-2xl font-bold text-xl flex items-center justify-center gap-2 shadow-lg active:scale-95 transition"
                      >
                        çœ‹ç¸½è¡¨èˆ‡å¥åº·è§£æ <span>â¡ï¸</span>
                      </button>
                    </div>
                  ) : (
                    <button 
                      onClick={checkPractice}
                      disabled={!practiceSugar || !practiceCubes}
                      className="w-full py-3 bg-gray-900 text-white rounded-xl font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-800 active:scale-95 transition"
                    >
                      å°ç­”æ¡ˆ
                    </button>
                  )}
                </div>
              </div>
            </div>
          </div>
        );
      }

      if (gameState === 'edu-summary') {
        return (
          <div className="min-h-screen bg-orange-50 flex flex-col items-center p-4 font-sans overflow-y-auto pb-20">
            <LobbyButton />
            <div className="max-w-md w-full space-y-6 mt-8">
              
              <div className="bg-white rounded-3xl shadow-lg p-6 text-center border-t-8 border-orange-500">
                <h2 className="text-2xl font-bold text-gray-800 mb-2">ğŸ“Š é£²æ–™å«ç³–ç¸½è¡¨</h2>
                <p className="text-sm text-gray-600 mb-4">ä¾†å›é¡§ä¸€ä¸‹å‰›æ‰æ‰€æœ‰é£²æ–™çš„çœŸé¢ç›®å§ï¼</p>
                
                <div className="max-h-60 overflow-y-auto border border-gray-200 rounded-xl mb-4 text-left">
                  <table className="w-full text-sm">
                    <thead className="bg-gray-100 sticky top-0">
                      <tr>
                        <th className="p-2 font-semibold text-gray-700">é£²æ–™åç¨±</th>
                        <th className="p-2 font-semibold text-gray-700 text-center">ç³–(g)</th>
                        <th className="p-2 font-semibold text-gray-700 text-center">æ–¹ç³–</th>
                      </tr>
                    </thead>
                    <tbody className="divide-y divide-gray-100">
                      {drinksData.map(drink => (
                        <tr key={drink.id} className="hover:bg-orange-50">
                          <td className="p-2 flex items-center gap-2">
                            <span className="text-xl">{drink.emoji}</span>
                            <span className="truncate w-28" title={drink.name}>{drink.name.split(' ')[0]}</span>
                          </td>
                          <td className="p-2 text-center text-red-500 font-bold">{drink.sugarGrams}</td>
                          <td className="p-2 text-center font-bold text-gray-700">{Math.round(drink.sugarGrams / 5)} é¡†</td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </div>

              <div className="bg-white rounded-3xl shadow-lg p-6 border-t-8 border-red-500">
                <h3 className="text-xl font-bold text-red-600 mb-4 flex items-center gap-2">
                  <span className="text-xl shrink-0 mt-1">âš ï¸</span> å¯¦è­‰é†«å­¸ï¼šç³–çš„å¥åº·å±æ©Ÿ
                </h3>
                
                <div className="mb-4 p-4 bg-red-50 rounded-xl border border-red-200">
                  <p className="text-sm text-red-800 font-bold mb-1">ä¸€æ—¥æ”å–ä¸Šé™ï¼š</p>
                  <p className="text-sm text-red-700">
                    ä¸–ç•Œè¡›ç”Ÿçµ„ç¹” (WHO) å»ºè­°ï¼Œå…’ç«¥æ¯æ—¥ã€Œæ¸¸é›¢ç³–ã€æ”å–é‡ä¸å®œè¶…é <strong>25å…¬å…‹ï¼ˆç´„5é¡†æ–¹ç³–ï¼‰</strong>ï¼
                  </p>
                </div>

                <p className="text-sm font-bold text-gray-700 mb-2">æ”å–éå¤šå«ç³–é£²æ–™çš„å£è™•ï¼š</p>
                <ul className="space-y-2">
                  <li className="flex items-start gap-2 text-sm text-gray-600 bg-gray-50 p-2 rounded">
                    <span className="text-red-500">ğŸ¦·</span> <strong>åš´é‡è›€ç‰™ï¼š</strong> ç³–åˆ†æ˜¯å£ä¸­ç´°èŒçš„æœ€æ„›ï¼Œå®¹æ˜“ä¾µè•ç‰™é½’ã€‚
                  </li>
                  <li className="flex items-start gap-2 text-sm text-gray-600 bg-gray-50 p-2 rounded">
                    <span className="text-orange-500">âš–ï¸</span> <strong>å…’ç«¥è‚¥èƒ–ï¼š</strong> å¤šé¤˜çš„ç³–åˆ†æœƒè½‰åŒ–ç‚ºè„‚è‚ªå›¤ç©ã€‚
                  </li>
                  <li className="flex items-start gap-2 text-sm text-gray-600 bg-gray-50 p-2 rounded">
                    <span className="text-yellow-500">ğŸ§ </span> <strong>æ³¨æ„åŠ›ä¸é›†ä¸­ï¼š</strong> è¡€ç³–å¿«é€Ÿé£†å‡åˆæ€¥é€Ÿä¸‹é™ï¼Œå°è‡´ä¸Šèª²å®¹æ˜“ç–²å€¦ã€‚
                  </li>
                  <li className="flex items-start gap-2 text-sm text-gray-600 bg-gray-50 p-2 rounded">
                    <span className="text-blue-500">ğŸ©¸</span> <strong>ç–¾ç—…é¢¨éšªï¼š</strong> å¢åŠ è‚è‡Ÿè² æ“”ï¼Œææ—©å¼•ç™¼ç¬¬äºŒå‹ç³–å°¿ç—…ã€‚
                  </li>
                </ul>
              </div>

              <button 
                onClick={restartGame}
                className="w-full py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-2xl font-bold text-xl flex items-center justify-center gap-2 shadow-lg active:scale-95 transition"
              >
                <span>ğŸ”„</span> å†ç©ä¸€æ¬¡
              </button>
            </div>
          </div>
        );
      }

      return (
        <div className={`min-h-screen ${currentDrink.color} flex flex-col items-center p-4 font-sans transition-colors duration-500`}>
          <LobbyButton />
          <div className="max-w-md w-full flex-1 flex flex-col mt-4 mb-20">
            
            <div className="flex justify-between items-center mb-6">
              <div className="text-sm font-bold text-gray-600 bg-white/50 px-3 py-1 rounded-full">
                é—œå¡ {currentDrinkIndex + 1} / {drinksData.length}
              </div>
              <div className="text-sm font-bold text-gray-600 bg-white/50 px-3 py-1 rounded-full">
                å¾—åˆ†: {score}
              </div>
            </div>

            <div className="bg-white rounded-3xl shadow-xl p-6 text-center relative z-10">
              <div className="text-8xl mb-4 drop-shadow-md">{currentDrink.emoji}</div>
              <h2 className="text-2xl font-extrabold text-gray-800">{currentDrink.name}</h2>
              
              {!showAnswer && (
                <div className="mt-4 min-h-[40px] flex justify-center">
                  {!showHint ? (
                    <button 
                      onClick={() => setShowHint(true)}
                      className="text-sm font-bold text-blue-600 bg-blue-50 px-4 py-2 rounded-full hover:bg-blue-100 transition"
                    >
                      ğŸ’¡ éœ€è¦æç¤ºå—ï¼Ÿ
                    </button>
                  ) : (
                    <div className="text-sm text-blue-800 bg-blue-50 p-3 rounded-xl animate-fade-in border border-blue-200">
                      {currentDrink.hint}
                    </div>
                  )}
                </div>
              )}
              
              {showAnswer && (
                <div className="mt-4 p-3 bg-gray-50 rounded-xl text-sm text-gray-600 border border-gray-200 animate-fade-in">
                  <span className="inline mr-1">â„¹ï¸</span>
                  {currentDrink.description}
                </div>
              )}
            </div>

            <div className="mt-8 flex-1 bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-lg border border-white flex flex-col">
              <h3 className="text-lg font-bold text-center text-gray-700 mb-4">
                {showAnswer ? 'éœ‡æ’¼çš„çœŸç›¸ï¼' : 'ä½ çŒœè£¡é¢æœ‰å¹¾é¡†æ–¹ç³–ï¼Ÿ'}
              </h3>

              <div className="flex-1 flex flex-col justify-end min-h-[150px] mb-4 relative">
              {!showAnswer ? (
                <div className="flex flex-wrap-reverse justify-center content-start gap-1 p-2 bg-gray-100/50 rounded-xl min-h-[120px]">
                  {guessCubes === 0 && <span className="text-gray-500 self-center font-bold">0 é¡†æ–¹ç³– (ç„¡ç³–)</span>}
                  {Array.from({ length: guessCubes }).map((_, i) => (
                    <SugarCube key={`guess-${i}`} />
                  ))}
                </div>
              ) : (
                  <div className="flex justify-around items-end h-full w-full">
                    <div className="flex flex-col items-center w-1/2 border-r border-gray-200">
                      <div className="text-sm text-gray-500 mb-2">ä½ çš„çŒœæ¸¬</div>
                      <div className="flex flex-wrap-reverse justify-center content-start gap-1 p-1 max-w-[120px]">
                        {Array.from({ length: guessCubes }).map((_, i) => (
                          <SugarCube key={`guess-ans-${i}`} />
                        ))}
                      </div>
                      <div className="font-bold mt-2 text-gray-700">{guessCubes} é¡†</div>
                    </div>
                    
                    <div className="flex flex-col items-center w-1/2">
                      <div className="text-sm text-red-500 font-bold mb-2 animate-pulse">å¯¦éš›å«ç³–é‡</div>
                      <div className="flex flex-wrap-reverse justify-center content-start gap-1 p-1 max-w-[120px]">
                        {Array.from({ length: actualCubes }).map((_, i) => (
                          <SugarCube key={`actual-${i}`} animate={true} delay={i * 100} />
                        ))}
                      </div>
                      <div className="font-bold mt-2 text-red-600 text-xl">{actualCubes} é¡†</div>
                    </div>
                  </div>
                )}
              </div>

              {!showAnswer ? (
                <div className="space-y-4">
                  <div className="flex justify-center items-center gap-4">
                    <button 
                      onClick={() => setGuessCubes(Math.max(0, guessCubes - 1))}
                      className="w-12 h-12 rounded-full bg-gray-200 text-gray-700 text-xl font-bold hover:bg-gray-300 active:scale-95 transition"
                    >-</button>
                    <div className="text-3xl font-black text-gray-800 w-16 text-center">{guessCubes}</div>
                <button 
                  onClick={() => setGuessCubes(guessCubes + 1)}
                  className="w-12 h-12 rounded-full bg-orange-100 text-orange-600 border-2 border-orange-200 text-xl font-bold hover:bg-orange-200 active:scale-95 transition"
                >+</button>
              </div>
              <button 
                onClick={handleGuess}
                className="w-full py-4 bg-gray-900 text-white rounded-xl font-bold text-lg hover:bg-gray-800 active:scale-95 transition"
              >
                é–å®šç­”æ¡ˆï¼
              </button>
            </div>
          ) : (
            <div className="space-y-4 text-center">
                  <div className="flex justify-center items-center gap-2 text-xl font-bold">
                    {Math.abs(guessCubes - actualCubes) <= 1 ? (
                      <span className="text-green-600 flex items-center gap-1"><span>âœ…</span> çŒœå¾—ç¥æº–ï¼</span>
                    ) : (
                      <span className="text-red-500 flex items-center gap-1"><span>âŒ</span> å·®å¤ªå¤šå•¦ï¼</span>
                    )}
                  </div>
                  <button 
                    onClick={nextRound}
                    className="w-full py-4 bg-orange-500 text-white rounded-xl font-bold text-lg hover:bg-orange-600 active:scale-95 transition flex justify-center items-center gap-2"
                  >
                    {currentDrinkIndex < drinksData.length - 1 ? 'æŒ‘æˆ°ä¸‹ä¸€æ¯' : 'çœ‹å¯¦è­‰é†«å­¸è§£æ'} <span>â¡ï¸</span>
                  </button>
                </div>
              )}
            </div>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<SugarGame />);
  </script>
</body>
</html>